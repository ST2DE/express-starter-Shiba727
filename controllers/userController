var db = require('../models');
var User = db.User;

// bcrypt.encode is for encrpt the password
let userController = {
	signinPage: function(req,res){
    	res.render('signup_login', { title: 'Sign Up / Login' });
	}
	login: function(req,res){
		let username:req.query.username;
		let password:bcrypt.encode(req.query.password);
		User.find({
			where:
				username,
				password
		})
		.then(function (user){
			if(! user){
				res.status(404)
				return res.json({
					status: 'user not found'
				})
			}
			return res.json({
				status : 'ok',
				message: 'hello user' + username
			});
		})
	}
};
module.exports = userController;